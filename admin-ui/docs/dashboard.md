# مستندات طراحی و منطق داشبورد NOWEX

## مقدمه

این مستند روند ایجاد داشبورد پروژه NOWEX و منطق‌های محاسباتی به‌کاررفته در آن را توضیح می‌دهد. هدف این است که تیم توسعه بتواند تصمیمات طراحی و پیاده‌سازی را بررسی و توسعه دهد.

---

## ساختار کلی داشبورد

- **کارت‌ها (Cards):** نمایش اطلاعات کلیدی شامل:
  - معاملات در سود و مجموع سود
  - معاملات در ضرر و مجموع ضرر
  - تفاضل سود و ضرر
  - بالانس حساب (اولیه، فعلی، کارمزدها، سود/زیان)
  - درآمد حاصل از کارمزدها
  - تعداد کل کاربران و تعداد کاربران فعال
- **فیلتر بازه زمانی:**
  - منوی کشویی برای بازه‌های آماده (روزانه، سه روزه، هفتگی، ۱۵ روزه، ماهانه)
  - دو فیلد انتخاب تاریخ (شروع و پایان) با آیکن تقویم
  - دکمه جستجو به شکل آیکن ذره‌بین
- **رابط کاربری (UI):**
  - متن‌ها سیاه روی زمینه سفید برای خوانایی بهتر
  - طراحی مینیمال و مرتب در یک خط برای صرفه‌جویی در فضا
  - جداسازی منوی کشویی و فیلدهای تاریخ با یک خط عمودی کوچک

---

## منطق محاسباتی کارت‌ها

### معاملات در سود

- ورودی: تعداد معاملات سودده و مجموع سود
- خروجی: نمایش تعداد و مجموع سود به واحد **ریال**

### معاملات در ضرر

- ورودی: تعداد معاملات زیان‌ده و مجموع ضرر
- خروجی: نمایش تعداد و مجموع ضرر به واحد **ریال**

### تفاضل سود و ضرر

- ورودی: مقدار تفاضل سود و ضرر
- خروجی: نمایش مقدار به واحد **ریال**

### بالانس حساب

- ورودی: بالانس اولیه، سود/زیان، کارمزدها، بالانس فعلی
- خروجی: نمایش همه مقادیر به واحد **ریال**

### درآمد حاصل از کارمزدها

- فرمول: \\( درآمد کارمزد = مجموع معاملات باز \\times 100000 \\; ریال \\)
- مثال: اگر مجموع معاملات باز 750000 باشد، درآمد کارمزد = 75,000,000,000 ریال

### کاربران

- تعداد کل کاربران: نمایش عدد + واحد "نفر"
- تعداد کاربران فعال: نمایش عدد + واحد "نفر"

---

## موتور محاسباتی (Compute Engine)

- فایل تستی `computeEngine.ts` ایجاد شده که داده‌های نمونه را پردازش می‌کند.
- محاسبات اصلی شامل:
  - مجموع سود معاملات سودده
  - مجموع ضرر معاملات زیان‌ده
  - تفاضل سود و ضرر
  - درآمد کارمزد بر اساس فرمول ثابت
- این موتور فعلاً داده‌های تستی را پردازش می‌کند و باید به بک‌اند متصل شود.

---

## لایه رابط با بک‌اند (Service Layer)

- نیاز به ایجاد فایل `dashboardService.ts` برای گرفتن داده‌ها از API بک‌اند.
- نمونه:
  ```ts
  export async function fetchDashboardData(range: {
    start: string;
    end: string;
  }) {
    const res = await fetch(
      `/api/dashboard?start=${range.start}&end=${range.end}`
    );
    if (!res.ok) throw new Error("Failed to fetch dashboard data");
    return res.json();
  }
  ```
